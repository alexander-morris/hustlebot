{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{colors}from\"../../utils/colors\";import{signInWithGoogle,handleRedirectResult}from\"../../services/auth\";export default function GoogleSignIn(_ref){var onSignIn=_ref.onSignIn,onClose=_ref.onClose;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRedirecting=_useState4[0],setIsRedirecting=_useState4[1];useEffect(function(){handleRedirectResult().then(function(result){if(result){onSignIn(result);}});},[]);var handleSignIn=function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setError(null);setIsRedirecting(false);console.log('Initiating Google sign in...');_context.next=6;return signInWithGoogle();case 6:userData=_context.sent;console.log('Google sign-in successful:',userData);if(userData){console.log('Calling onSignIn callback with:',userData);onSignIn(userData);}else{setIsRedirecting(true);}_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error('Sign in error:',_context.t0);setError(_context.t0.message);setIsRedirecting(false);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function handleSignIn(){return _ref2.apply(this,arguments);};}();return React.createElement(View,{style:styles.overlay},React.createElement(View,{style:styles.modal},React.createElement(Text,{style:styles.title},\"Save Your Progress\"),React.createElement(Text,{style:styles.description},\"Sign in with Google to save your conversation history and continue your journey.\"),error&&React.createElement(Text,{style:styles.errorText},error),isRedirecting&&React.createElement(Text,{style:styles.redirectText},\"Redirecting to Google Sign In...\"),React.createElement(TouchableOpacity,{style:styles.googleButton,onPress:handleSignIn,disabled:isRedirecting},React.createElement(Text,{style:styles.googleButtonText},\"Sign in with Google\")),React.createElement(TouchableOpacity,{style:styles.skipButton,onPress:onClose,disabled:isRedirecting},React.createElement(Text,{style:styles.skipButtonText},\"Continue without signing in\"))));}var styles=StyleSheet.create({overlay:{position:'absolute',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.7)',justifyContent:'center',alignItems:'center',zIndex:1000},modal:{backgroundColor:colors.background.secondary,padding:24,borderRadius:12,width:'90%',maxWidth:400,alignItems:'center'},title:{fontSize:24,fontWeight:'bold',color:colors.text.primary,marginBottom:16},description:{fontSize:16,color:colors.text.secondary,textAlign:'center',marginBottom:24},googleButton:{backgroundColor:'#4285F4',paddingHorizontal:24,paddingVertical:12,borderRadius:6,width:'100%',alignItems:'center',marginBottom:16},googleButtonText:{color:colors.text.inverse,fontSize:16,fontWeight:'bold'},skipButton:{paddingVertical:12},skipButtonText:{color:colors.text.tertiary,fontSize:14},errorText:{color:colors.error,marginBottom:16,textAlign:'center'},redirectText:{color:colors.text.secondary,marginBottom:16,textAlign:'center'}});","map":{"version":3,"names":["React","useState","useEffect","View","Text","TouchableOpacity","StyleSheet","colors","signInWithGoogle","handleRedirectResult","GoogleSignIn","_ref","onSignIn","onClose","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","isRedirecting","setIsRedirecting","then","result","handleSignIn","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","wrap","_callee$","_context","prev","next","console","log","sent","t0","message","stop","apply","arguments","createElement","style","styles","overlay","modal","title","description","errorText","redirectText","googleButton","onPress","disabled","googleButtonText","skipButton","skipButtonText","create","position","top","left","right","bottom","backgroundColor","justifyContent","alignItems","zIndex","background","secondary","padding","borderRadius","width","maxWidth","fontSize","fontWeight","color","text","primary","marginBottom","textAlign","paddingHorizontal","paddingVertical","inverse","tertiary"],"sources":["/Users/almorris/cursor-test/frontend/src/components/Auth/GoogleSignIn.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { colors } from '../../utils/colors';\nimport { signInWithGoogle, handleRedirectResult } from '../../services/auth';\n\nexport default function GoogleSignIn({ onSignIn, onClose }) {\n  const [error, setError] = useState(null);\n  const [isRedirecting, setIsRedirecting] = useState(false);\n\n  useEffect(() => {\n    // Check for redirect result when component mounts\n    handleRedirectResult().then(result => {\n      if (result) {\n        onSignIn(result);\n      }\n    });\n  }, []);\n\n  const handleSignIn = async () => {\n    try {\n      setError(null);\n      setIsRedirecting(false);\n      console.log('Initiating Google sign in...');\n      const userData = await signInWithGoogle();\n      console.log('Google sign-in successful:', userData);\n      if (userData) {\n        console.log('Calling onSignIn callback with:', userData);\n        onSignIn(userData);\n      } else {\n        setIsRedirecting(true);\n      }\n    } catch (error) {\n      console.error('Sign in error:', error);\n      setError(error.message);\n      setIsRedirecting(false);\n    }\n  };\n\n  return (\n    <View style={styles.overlay}>\n      <View style={styles.modal}>\n        <Text style={styles.title}>Save Your Progress</Text>\n        <Text style={styles.description}>\n          Sign in with Google to save your conversation history and continue your journey.\n        </Text>\n        \n        {error && (\n          <Text style={styles.errorText}>{error}</Text>\n        )}\n        \n        {isRedirecting && (\n          <Text style={styles.redirectText}>\n            Redirecting to Google Sign In...\n          </Text>\n        )}\n        \n        <TouchableOpacity \n          style={styles.googleButton}\n          onPress={handleSignIn}\n          disabled={isRedirecting}\n        >\n          <Text style={styles.googleButtonText}>Sign in with Google</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity \n          style={styles.skipButton}\n          onPress={onClose}\n          disabled={isRedirecting}\n        >\n          <Text style={styles.skipButtonText}>Continue without signing in</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.7)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000\n  },\n  modal: {\n    backgroundColor: colors.background.secondary,\n    padding: 24,\n    borderRadius: 12,\n    width: '90%',\n    maxWidth: 400,\n    alignItems: 'center'\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: colors.text.primary,\n    marginBottom: 16\n  },\n  description: {\n    fontSize: 16,\n    color: colors.text.secondary,\n    textAlign: 'center',\n    marginBottom: 24\n  },\n  googleButton: {\n    backgroundColor: '#4285F4',\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 6,\n    width: '100%',\n    alignItems: 'center',\n    marginBottom: 16\n  },\n  googleButtonText: {\n    color: colors.text.inverse,\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  skipButton: {\n    paddingVertical: 12\n  },\n  skipButtonText: {\n    color: colors.text.tertiary,\n    fontSize: 14\n  },\n  errorText: {\n    color: colors.error,\n    marginBottom: 16,\n    textAlign: 'center'\n  },\n  redirectText: {\n    color: colors.text.secondary,\n    marginBottom: 16,\n    textAlign: 'center'\n  }\n}); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}